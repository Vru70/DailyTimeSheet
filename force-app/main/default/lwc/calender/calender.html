<!--
  @author            : Vrushabh Uprikar
  @last modified on  : 30-09-2021
  @last modified by  : Vrushabh Uprikar
  Modifications Log
  Ver   Date         Author             Modification
  1.0   21-09-2021   Vrushabh Uprikar   Initial Version
-->
<template>
	<lightning-card>
		<div class="slds-grid slds-grid_vertical">
			<div class="slds-col">
				<div class="slds-grid slds-gutters slds-grid_align-center">
					<div class="slds-col">
						<lightning-button-icon icon-name="utility:chevronleft"
							alternative-text="Pre"
							title="Previous"
							onclick={handleClickPrevious}>
						</lightning-button-icon>
					</div>
					<div class="slds-col">
						<lightning-layout-item padding="around-small">
							<strong>{CURRUNET_MONTH_NAME} {currentYear}</strong>
						</lightning-layout-item>
					</div>
					<div class="slds-col">
						<lightning-button-icon icon-name="utility:chevronright"
							alternative-text="Next"
							title="Next"
							onclick={handleClickNext}>
						</lightning-button-icon>
					</div>
				</div>
			</div>
			<div class="slds-col">
				<div class="slds-grid slds-wrap ">

					<div class="slds-col slds-size_7-of-8">

						<div class="slds-grid slds-text-align_center each-month-grid">
							<template for:each={WEEK_DAYS_LIST}
								for:item="day">
								<div class="slds-col slds-box slds-m-around_small weeks"
									key={day}>
									<div class="slds-tile"> {day} </div>
								</div>
							</template>
						</div>

						<div class="each-month-grid slds-grid ">
							<template for:each={dispMonthDates}
								for:item="date">
								<div class="slds-col slds-box slds-m-around_small"
									key={date}
									id={date.date}
									style="height: 180px;"
									onclick={onClickOfDate}>
									<div class="slds-tile">
										{date.day}
										<br />
										<template if:true={date.Daily_Log}>
											<h3>DailyLog : {date.Daily_Log}</h3>
										</template>
									</div>
								</div>
							</template>
							<!-- modal start -->
							<template if:true={showModal}>
								<section role="dialog"
									tabindex="-1"
									aria-labelledby="modal-heading-01"
									aria-modal="true"
									aria-describedby="modal-content-id-1"
									class="slds-modal slds-fade-in-open">
									<template if:true={isCreateFrom}>
										<div class="slds-modal__container">
											<!-- Modal/Popup Box LWC header here -->
											<header class="slds-modal__header">
												<button
													class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
													title="Close"
													onclick={closeModal}>

													<lightning-icon icon-name="utility:close"
														alternative-text="close"
														variant="inverse"
														size="small"></lightning-icon>
													<span class="slds-assistive-text">Close</span>
												</button>
												<h2 id="modal-heading-01"
													class="slds-text-heading_medium slds-hyphenate">Create New Log</h2>
											</header>
											<!-- Modal/Popup Box LWC body starts here -->
											<div class="slds-modal__content slds-p-around_medium"
												id="modal-content-id-1">

												<lightning-record-edit-form object-api-name={OBJECT_API_NAME}
													columns="1"
													mode="edit"
													onsuccess={handleSuccess}>
													<lightning-input-field field-name='Date__c'
														value={selectedDate}></lightning-input-field>
													<div class="slds-m-top_medium">
														<lightning-input-field field-name='Task__c'>
														</lightning-input-field>
														<lightning-input-field field-name='Daily_Log__c'>
														</lightning-input-field>

														<lightning-button class="slds-m-top_small"
															label="Cancel"
															onclick={closeModal}></lightning-button>
														<lightning-button class="slds-m-top_small"
															type="submit"
															label="Save"></lightning-button>
													</div>
												</lightning-record-edit-form>


											</div>
										</div>
									</template>

									<template if:true={isEditFrom}>
										<div class="slds-modal__container">
											<!-- Modal/Popup Box LWC header here -->
											<header class="slds-modal__header">
												<button
													class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
													title="Close"
													onclick={closeModal}>

													<lightning-icon icon-name="utility:close"
														alternative-text="close"
														variant="inverse"
														size="small"></lightning-icon>
													<span class="slds-assistive-text">Close</span>
												</button>
												<h2 id="modal-heading-02"
													class="slds-text-heading_medium slds-hyphenate">Edit New Log</h2>
											</header>
											<!-- Modal/Popup Box LWC body starts here -->
											<div class="slds-modal__content slds-p-around_medium"
												id="modal-content-id-2">

												<lightning-record-edit-form object-api-name={objectApiName}
													record-id={recordId}
													onsuccess={editSuccess}
													columns="1"
													mode="edit">
													<lightning-input-field field-name={fields}>
													</lightning-input-field>
													<div class="slds-var-m-top_medium">
														<lightning-button class="slds-m-top_small"
															label="Cancel"
															onclick={closeModal}></lightning-button>
														<lightning-button class="slds-m-top_small"
															type="submit"
															label="Save"></lightning-button>
													</div>
												</lightning-record-edit-form>


											</div>
										</div>
									</template>
								</section>
							</template>
							<!-- modal end -->
						</div>
					</div>

					<div class="slds-col slds-size_1-of-8 slds-grid_vertical">
						<div class="slds-grid slds-text-align_center">
							<div class="slds-col slds-box slds-m-around_small weeks">
								<div class="slds-tile"> Total </div>
							</div>
						</div>
						<div class="each-month-total slds-grid ">
							<template for:each={totalHours}
								for:item="con">
								<div key={con}
									class="slds-col slds-box slds-m-around_small"
									style="height: 180px;">
									<div class="slds-tile">
										Total Hr : {con}
									</div>
								</div>
							</template>
						</div>
					</div>
				</div>
			</div>
		</div>
	</lightning-card>
</template>
